// Unified shared types used across engines
export type DocumentCategory =
  | 'inspection-report'
  | 'pre-inspection-questionnaire'
  | 'evidence'
  | 'policy'
  | 'other';

export interface DocumentMetadata {
  pages?: number;
  author?: string;
  createdDate?: Date;
  modifiedDate?: Date;
  keywords?: string[];
  // If document originates from web or a link, store it here
  sourceUrl?: string;
}

export interface Document {
  id: string;
  name: string;
  type: 'pdf' | 'docx' | 'doc' | 'txt' | 'html';
  size?: number;
  uploadedAt?: Date;
  extractedText: string;
  content?: string;
  metadata?: DocumentMetadata;
  status?: 'pending' | 'processing' | 'completed' | 'error';
  category?: DocumentCategory;
  // parsed PIQ answers (if the document is a PIQ or has been parsed)
  parsedPIQ?: Record<string, string | null>;
}

/* GDC domain types */
export interface GDCRequirement {
  id: number;
  standard?: number;
  title?: string;
  description?: string;
  evidenceExamples?: string[];
}

export enum ComplianceStatus {
  UNKNOWN = 'unknown',
  MET = 'met',
  PARTIALLY_MET = 'partially_met',
  NOT_MET = 'not_met'
}

export interface Evidence {
  sourceDocName: string;
  sourceUrl?: string | null;
  excerpt: string;
  location?: string;
  page?: number | null;
  relevanceScore?: number;
  position?: { index: number; length: number } | null;
  confidence?: number;
}

export interface RequirementResult {
  requirementId: number;
  status: ComplianceStatus;
  evidence: Evidence[];
  gaps: string[];
  recommendations: string[];
  confidenceScore: number;
  goldStandard?: string;
  currentTextSummary?: string;
}

export interface AnalysisResult {
  id: string;
  documentId: string;
  timestamp: string;
  requirementResults: RequirementResult[];
  summary?: string;
}
